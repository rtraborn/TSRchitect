--------------------------------------------------------------------------------
Copyright (c) 2011-2015, R. Taylor Raborn
                         Krishnakumar Sridharan
                         Daniel S. Standage
			 Indiana University
--------------------------------------------------------------------------------

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.


--------------------------------------------------------------------------------
I. Introduction
--------------------------------------------------------------------------------

TSRchitect is an open source bioinformatics tool that identifies and annotates the
major region of transcription initiation--the Transcription Start Region--for a gene
from large-scale transcription start site (TSS) data. The TSR for a gene is presumed 
to be its promoter, and can be evaluated further. TSRchitect is capable of handling
and analyzing data of various sources, including CAGE, EST and full-length cDNA. 
The software package is implemented in R, and uses C and perl scripts that serve
as utilities to prepare the datasets for subsequent analysis by TSRchitect. This
document also provides instructions for setting up a pipeline to trim and align
CAGE tags to the genome.  

--------------------------------------------------------------------------------
II. Description
--------------------------------------------------------------------------------

TSRchitect's core software module utilizes the X-means algorithm (Pelleg and Moore, 1999)
to cluster the TSSs for each gene according to their positions on the genome, then identifies
the TSR from this information (for further detail please see the Supplement of Raborn et al., 2014
In addition to annotating the TSR, the program also provides quantitative measures of the
annotated TSRs, including i) the genomic coordinates of the TSR ii) the breadth: the genomic
distance occupied by the TSSs within the TSR, and iii) the shape, which is defined here 
according to the kurtile, or fourth moment, of the TSS distribution within the TSR.

This package was written in response to the repeated observation, within metazoans and 
other eukaryotes, that the mRNAs of most protein-coding genes lack a single unique TSS,
instead displaying a distribution of TSS at the promoter. This, coupled with the apparent 
pervasive background transcription apparent in large-scale datasets, makes identifying 
putative promoters(which we call TSRs) challenging. By identifying the putative promoters
of expressed genes across a large-scale expression dataset, TSRchitect is intended to provide
condition-specific annotation of hypothesized cis-regulatory regions and potentially generate
observations of biological insight. 

TSSs are assigned to genes using 'cagep', a module that strandedly connects mapped CAGE
tags to annotated coding genes within a specified downstream distance. The default value
is 50kb (after Carninci et al., 2006). TSRchitect can be used to analyze data from any eukaryotic 
organism, provided it has an annotated complement of protein-coding genes provided in
GFF3 format.

Output annotations are provided in a flat, text, GFF3-like output file. TSRchitect
is efficient: an analysis of entire TSS datasets typically completes within 10-15 minutes
on a standard desktop workstation. To provide guidance for using TSRchitect, we have included two 
detailed use cases that provide step-by-step instructions for running this software
package.
 
--------------------------------------------------------------------------------
III. Prerequisites
--------------------------------------------------------------------------------
  * R 3.0.0 or higher
  * Common development tools (C compiler, Make, etc)
  * GenomeTools (genome analysis software package | genometools.org; found at https://github.com/genometools/genometools)

--------------------------------------------------------------------------------
IV. Installation
--------------------------------------------------------------------------------
**Need to outline steps for installtion, as well as create an INSTALL document**

For cagep, just 'cd cagep; make SAMHDR=/path/to/samtools/dir'. Will improve docs
when this is a bit more stable. ##DS to add to this 
--------------------------------------------------------------------------------
V. CAGE pipeline
--------------------------------------------------------------------------------

We provide a template analysis pipeline for analyzing CAGE data, but users are
welcome to use their favorite trimming and alignment software as well, provided
the CAGE data are in GFF3 format. 
Our example pipeline uses freely available, well-established bioinformatics 
software and is found at 'demo/cage_pipeline-demo'   

--------------------------------------------------------------------------------
VI. Examples
--------------------------------------------------------------------------------

To highlight the functionality of TSRchitect, We provide two use cases, one for 
analyzing CAGE data and the other for analyzing EST data.

EST/cDNA data: /demo/ESTcDNA-demo
CAGE data: /demo/cage-demo.R

--------------------------------------------------------------------------------
VII. Citing TSRchitect
--------------------------------------------------------------------------------

R. Taylor Raborn, Krishnakumar Sridharan, Daniel Standage, John
M. Logsdon, Jr. and Volker Brendel. TSRchitect: A Tool to Identify
Promoters from Large-Scale Transcription Start Site (TSS) Data. In Preparation.
